!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(a,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(a)),e(t)}:e(window.jQuery)}(function(s){s.extend(s.FE.DEFAULTS,{paragraphFormat:{N:"Normal",H1:"Heading 1",H2:"Heading 2",H3:"Heading 3",H4:"Heading 4",PRE:"Code"},paragraphFormatSelection:!1}),s.FE.PLUGINS.paragraphFormat=function(i){function n(a,t){var e=i.html.defaultTag();if(t&&t.toLowerCase()!=e)if(0<a.find("ul, ol").length){var r=s("<"+t+">");a.prepend(r);for(var n=i.node.contents(a.get(0))[0];n&&["UL","OL"].indexOf(n.tagName)<0;){var o=n.nextSibling;r.append(n),n=o}}else a.html("<"+t+">"+a.html()+"</"+t+">")}function o(a,t){var e=i.html.defaultTag();t||(t='div class="fr-temp-div" data-empty="true"'),t.toLowerCase()==e?a.replaceWith(a.html()):a.replaceWith(s("<"+t+">").html(a.html()))}function l(a,t){var e=i.html.defaultTag();t||(t='div class="fr-temp-div"'+(i.node.isEmpty(a.get(0),!0)?' data-empty="true"':"")),t.toLowerCase()==e?(i.node.isEmpty(a.get(0),!0)||a.append("<br/>"),a.replaceWith(a.html())):a.replaceWith(s("<"+t+">").html(a.html()))}function p(a,t){t||(t='div class="fr-temp-div"'+(i.node.isEmpty(a.get(0),!0)?' data-empty="true"':"")),a.replaceWith(s("<"+t+" "+i.node.attributes(a.get(0))+">").html(a.html()).removeAttr("data-empty"))}function a(a){"N"==a&&(a=i.html.defaultTag()),i.selection.save(),i.html.wrap(!0,!0,!0,!0),i.selection.restore();var t=i.selection.blocks();i.selection.save(),i.$el.find("pre").attr("skip",!0);for(var e=0;e<t.length;e++)if(t[e].tagName!=a&&!i.node.isList(t[e])){var r=s(t[e]);"LI"==t[e].tagName?n(r,a):"LI"==t[e].parentNode.tagName&&t[e]?o(r,a):0<=["TD","TH"].indexOf(t[e].parentNode.tagName)?l(r,a):p(r,a)}i.$el.find('pre:not([skip="true"]) + pre:not([skip="true"])').each(function(){s(this).prev().append("<br>"+s(this).html()),s(this).remove()}),i.$el.find("pre").removeAttr("skip"),i.html.unwrap(),i.selection.restore()}function t(a,t){var e=i.selection.blocks();if(e.length){var r=e[0],n="N",o=i.html.defaultTag();r.tagName.toLowerCase()!=o&&r!=i.el&&(n=r.tagName),t.find('.fr-command[data-param1="'+n+'"]').addClass("fr-active").attr("aria-selected",!0)}else t.find('.fr-command[data-param1="N"]').addClass("fr-active").attr("aria-selected",!0)}function e(a){if(i.opts.paragraphFormatSelection){var t=i.selection.blocks();if(t.length){var e=t[0],r="N",n=i.html.defaultTag();e.tagName.toLowerCase()!=n&&e!=i.el&&(r=e.tagName),0<=["LI","TD","TH"].indexOf(r)&&(r="N"),a.find("> span").text(i.language.translate(i.opts.paragraphFormat[r]))}else a.find("> span").text(i.language.translate(i.opts.paragraphFormat.N))}}return{apply:a,refreshOnShow:t,refresh:e}},s.FE.RegisterCommand("paragraphFormat",{type:"dropdown",displaySelection:function(a){return a.opts.paragraphFormatSelection},defaultSelection:"Normal",displaySelectionWidth:100,html:function(){var a='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.paragraphFormat;for(var e in t)if(t.hasOwnProperty(e)){var r=this.shortcuts.get("paragraphFormat."+e);r=r?'<span class="fr-shortcut">'+r+"</span>":"",a+='<li role="presentation"><'+("N"==e?this.html.defaultTag()||"DIV":e)+' style="padding: 0 !important; margin: 0 !important;" role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="paragraphFormat" data-param1="'+e+'" title="'+this.language.translate(t[e])+'">'+this.language.translate(t[e])+"</a></"+("N"==e?this.html.defaultTag()||"DIV":e)+"></li>"}return a+"</ul>"},title:"Paragraph Format",callback:function(a,t){this.paragraphFormat.apply(t)},refresh:function(a){this.paragraphFormat.refresh(a)},refreshOnShow:function(a,t){this.paragraphFormat.refreshOnShow(a,t)},plugin:"paragraphFormat"}),s.FE.DefineIcon("paragraphFormat",{NAME:"paragraph"})});