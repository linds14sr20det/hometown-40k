!function(n){"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),n(t)}:n(window.jQuery)}(function(i){i.extend(i.FE.DEFAULTS,{charCounterMax:-1,charCounterCount:!0}),i.FE.PLUGINS.charCounter=function(n){function r(){return n.el.textContent.length}function e(e){if(n.opts.charCounterMax<0)return!0;if(r()<n.opts.charCounterMax)return!0;var t=e.which;return!(!n.keys.ctrlKey(e)&&n.keys.isCharacter(t)||t===i.FE.KEYCODE.IME)||(e.preventDefault(),e.stopPropagation(),n.events.trigger("charCounter.exceeded"),!1)}function t(e){return n.opts.charCounterMax<0?e:i("<div>").html(e).text().length+r()<=n.opts.charCounterMax?e:(n.events.trigger("charCounter.exceeded"),"")}function o(){if(n.opts.charCounterCount){var e=r()+(0<n.opts.charCounterMax?"/"+n.opts.charCounterMax:"");a.text(e),n.opts.toolbarBottom&&a.css("margin-bottom",n.$tb.outerHeight(!0));var t=n.$wp.get(0).offsetWidth-n.$wp.get(0).clientWidth;0<=t&&("rtl"==n.opts.direction?a.css("margin-left",t):a.css("margin-right",t))}}function u(){return!!n.$wp&&!!n.opts.charCounterCount&&((a=i('<span class="fr-counter"></span>')).css("bottom",n.$wp.css("border-bottom-width")),n.$box.append(a),n.events.on("keydown",e,!0),n.events.on("paste.afterCleanup",t),n.events.on("keyup contentChanged input",function(){n.events.trigger("charCounter.update")}),n.events.on("charCounter.update",o),n.events.trigger("charCounter.update"),void n.events.on("destroy",function(){i(n.o_win).off("resize.char"+n.id),a.removeData().remove(),a=null}))}var a;return{_init:u,count:r}}});