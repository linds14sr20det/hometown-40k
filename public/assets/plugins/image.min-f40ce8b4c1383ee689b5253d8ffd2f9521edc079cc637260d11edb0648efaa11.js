!function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&module.exports?module.exports=function(e,t){return void 0===t&&(t="undefined"!=typeof window?require("jquery"):require("jquery")(e)),i(t)}:i(window.jQuery)}(function(Ne){Ne.extend(Ne.FE.POPUP_TEMPLATES,{"image.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),Ne.extend(Ne.FE.DEFAULTS,{imageInsertButtons:["imageBack","|","imageUpload","imageByURL"],imageEditButtons:["imageReplace","imageAlign","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUploadURL:"https://i.froala.com/upload",imageUploadParam:"file",imageUploadParams:{},imageUploadToS3:!1,imageUploadMethod:"POST",imageMaxSize:10485760,imageAllowedTypes:["jpeg","jpg","png","gif","svg+xml"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5}),Ne.FE.PLUGINS.image=function(d){function f(){var e=d.popups.get("image.insert").find(".fr-image-by-url-layer input");e.val(""),De&&e.val(De.attr("src")),e.trigger("change")}function i(){var e=d.$tb.find('.fr-command[data-cmd="insertImage"]'),t=d.popups.get("image.insert");if(t||(t=T()),b(),!t.hasClass("fr-active"))if(d.popups.refresh("image.insert"),d.popups.setContainer("image.insert",d.$tb),e.is(":visible")){var i=e.offset().left+e.outerWidth()/2,a=e.offset().top+(d.opts.toolbarBottom?10:e.outerHeight()-10);d.popups.show("image.insert",i,a,e.outerHeight())}else d.position.forSelection(t),d.popups.show("image.insert")}function s(){var e=d.popups.get("image.edit");if(e||(e=h()),e){d.popups.setContainer("image.edit",d.$sc),d.popups.refresh("image.edit");var t=De.offset().left+De.outerWidth()/2,i=De.offset().top+De.outerHeight();d.popups.show("image.edit",t,i,De.outerHeight())}}function g(){b()}function a(e){e.hasClass("fr-dii")||e.hasClass("fr-dib")||(e.addClass("fr-fi"+ue(e)[0]),e.addClass("fr-di"+ce(e)[0]),e.css("margin",""),e.css("float",""),e.css("display",""),e.css("z-index",""),e.css("position",""),e.css("overflow",""),e.css("vertical-align",""))}function r(e){ge(e,e.hasClass("fr-dib")?"block":e.hasClass("fr-dii")?"inline":null,e.hasClass("fr-fil")?"left":e.hasClass("fr-fir")?"right":ue(e)),e.removeClass("fr-dib fr-dii fr-fir fr-fil")}function o(){for(var e="IMG"==d.el.tagName?[d.el]:d.el.querySelectorAll("img"),t=0;t<e.length;t++){var i=Ne(e[t]);!d.opts.htmlUntouched&&d.opts.useClasses?((0<=d.opts.imageEditButtons.indexOf("imageAlign")||0<=d.opts.imageEditButtons.indexOf("imageDisplay"))&&a(i),d.opts.imageTextNear||i.removeClass("fr-dii").addClass("fr-dib")):d.opts.htmlUntouched||d.opts.useClasses||(0<=d.opts.imageEditButtons.indexOf("imageAlign")||0<=d.opts.imageEditButtons.indexOf("imageDisplay"))&&r(i),d.opts.iframe&&i.on("load",d.size.syncIframe)}}function p(e){void 0===e&&(e=!0);var t,i=Array.prototype.slice.call(d.el.querySelectorAll("img")),a=[];for(t=0;t<i.length;t++)a.push(i[t].getAttribute("src")),Ne(i[t]).toggleClass("fr-draggable",d.opts.imageMove),""===i[t].getAttribute("class")&&i[t].removeAttribute("class"),""===i[t].getAttribute("style")&&i[t].removeAttribute("style");if(Le)for(t=0;t<Le.length;t++)a.indexOf(Le[t].getAttribute("src"))<0&&d.events.trigger("image.removed",[Ne(Le[t])]);if(Le&&e){var s=[];for(t=0;t<Le.length;t++)s.push(Le[t].getAttribute("src"));for(t=0;t<i.length;t++)s.indexOf(i[t].getAttribute("src"))<0&&d.events.trigger("image.loaded",[Ne(i[t])])}Le=i}function l(){if(Se||q(),!De)return!1;var e=d.$wp||d.$sc;e.append(Se),Se.data("instance",d);var t=e.scrollTop()-("static"!=e.css("position")?e.offset().top:0),i=e.scrollLeft()-("static"!=e.css("position")?e.offset().left:0);i-=d.helpers.getPX(e.css("border-left-width")),t-=d.helpers.getPX(e.css("border-top-width")),d.$el.is("img")&&d.$sc.is("body")&&(i=t=0),Se.css("top",(d.opts.iframe?De.offset().top+d.$iframe.position().top:De.offset().top+t)-1).css("left",(d.opts.iframe?De.offset().left:De.offset().left+i)-1).css("width",De.get(0).getBoundingClientRect().width).css("height",De.get(0).getBoundingClientRect().height).addClass("fr-active")}function t(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function n(e){if(!d.core.sameInstance(Se))return!0;if(e.preventDefault(),e.stopPropagation(),d.$el.find("img.fr-error").left)return!1;d.undo.canDo()||d.undo.saveStep();var t=e.pageX||e.originalEvent.touches[0].pageX;if("mousedown"==e.type){var i=d.$oel.get(0).ownerDocument,a=i.defaultView||i.parentWindow,s=!1;try{s=a.location!=a.parent.location&&!(a.$&&a.$.FE)}catch(l){}s&&a.frameElement&&(t+=d.helpers.getPX(Ne(a.frameElement).offset().left)+a.frameElement.clientLeft)}(Re=Ne(this)).data("start-x",t),Re.data("start-width",De.width()),Re.data("start-height",De.height());var r=De.width();if(d.opts.imageResizeWithPercent){var n=De.parentsUntil(d.$el,d.html.blockTagsQuery()).get(0)||d.el;De.css("width",(r/Ne(n).outerWidth()*100).toFixed(2)+"%")}else De.css("width",r);$e.show(),d.popups.hideAll(),fe()}function u(e){if(!d.core.sameInstance(Se))return!0;var t;if(Re&&De){if(e.preventDefault(),d.$el.find("img.fr-error").left)return!1;var i=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null);if(!i)return!1;var a=i-Re.data("start-x"),s=Re.data("start-width");if((Re.hasClass("fr-hnw")||Re.hasClass("fr-hsw"))&&(a=0-a),d.opts.imageResizeWithPercent){var r=De.parentsUntil(d.$el,d.html.blockTagsQuery()).get(0)||d.el;s=((s+a)/Ne(r).outerWidth()*100).toFixed(2),d.opts.imageRoundPercent&&(s=Math.round(s)),De.css("width",s+"%"),(t=(d.helpers.getPX(De.css("width"))/Ne(r).outerWidth()*100).toFixed(2))!==s&&De.css("width",t+"%"),De.css("height","").removeAttr("height")}else s+a>=d.opts.imageMinWidth&&De.css("width",s+a),(t=d.helpers.getPX(De.css("width")))!==s+a&&De.css("width",t),(De.attr("style")||"").match(/(^height:)|(; *height:)/)&&De.css("height",Re.data("start-height")*De.width()/Re.data("start-width"));l(),d.events.trigger("image.resize",[Ce()])}}function c(e){if(!d.core.sameInstance(Se))return!0;if(Re&&De){if(e&&e.stopPropagation(),d.$el.find("img.fr-error").left)return!1;Re=null,$e.hide(),l(),s(),d.undo.saveStep(),d.events.trigger("image.resizeEnd",[Ce()])}}function m(e,t,i){d.edit.on(),De&&De.addClass("fr-error"),w(d.language.translate("Something went wrong. Please try again.")),!De&&i&&V(i),d.events.trigger("image.error",[{code:e,message:Te[e]},t,i])}function h(e){if(e)return d.$wp&&d.events.$on(d.$wp,"scroll",function(){De&&d.popups.isVisible("image.edit")&&(d.events.disableBlur(),E(De))}),!0;var t="";if(0<d.opts.imageEditButtons.length){t+='<div class="fr-buttons">',t+=d.button.buildList(d.opts.imageEditButtons);var i={buttons:t+="</div>"};return d.popups.create("image.edit",i)}return!1}function v(e){var t=d.popups.get("image.insert");if(t||(t=T()),t.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),t.find(".fr-image-progress-bar-layer").addClass("fr-active"),t.find(".fr-buttons").hide(),De){d.popups.setContainer("image.insert",d.$sc);var i=De.offset().left+De.width()/2,a=De.offset().top+De.height();d.popups.show("image.insert",i,a,De.outerHeight())}void 0===e&&y(d.language.translate("Uploading"),0)}function b(e){var t=d.popups.get("image.insert");if(t&&(t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),t.find(".fr-image-progress-bar-layer").removeClass("fr-active"),t.find(".fr-buttons").show(),e||d.$el.find("img.fr-error").length)){if(d.events.focus(),d.$el.find("img.fr-error").length&&(d.$el.find("img.fr-error").remove(),d.undo.saveStep(),d.undo.run(),d.undo.dropRedo()),!d.$wp&&De){var i=De;oe(!0),d.selection.setAfter(i.get(0)),d.selection.restore()}d.popups.hide("image.insert")}}function y(e,t){var i=d.popups.get("image.insert");if(i){var a=i.find(".fr-image-progress-bar-layer");a.find("h3").text(e+(t?" "+t+"%":"")),a.removeClass("fr-error"),t?(a.find("div").removeClass("fr-indeterminate"),a.find("div > span").css("width",t+"%")):a.find("div").addClass("fr-indeterminate")}}function w(e){v();var t=d.popups.get("image.insert").find(".fr-image-progress-bar-layer");t.addClass("fr-error");var i=t.find("h3");i.text(e),d.events.disableBlur(),i.focus()}function e(){var e=d.popups.get("image.insert").find(".fr-image-by-url-layer input");0<e.val().length&&(v(),y(d.language.translate("Loading image")),A(e.val(),!0,[],De),e.val(""),e.blur())}function E(e){ne.call(e.get(0))}function C(){var e=Ne(this);d.popups.hide("image.insert"),e.removeClass("fr-uploading"),e.next().is("br")&&e.next().remove(),E(e),d.events.trigger("image.loaded",[e])}function A(n,e,o,l,f){d.edit.off(),y(d.language.translate("Loading image")),e&&(n=d.helpers.sanitizeURL(n));var t=new Image;t.onload=function(){var e,t;if(l){d.undo.canDo()||l.hasClass("fr-uploading")||d.undo.saveStep();var i=l.data("fr-old-src");l.data("fr-image-pasted")&&(i=null),d.$wp?((e=l.clone().removeData("fr-old-src").removeClass("fr-uploading").removeAttr("data-fr-image-pasted")).off("load"),i&&l.attr("src",i),l.replaceWith(e)):e=l;for(var a=e.get(0).attributes,s=0;s<a.length;s++){var r=a[s];0===r.nodeName.indexOf("data-")&&e.removeAttr(r.nodeName)}if(void 0!==o)for(t in o)o.hasOwnProperty(t)&&"link"!=t&&e.attr("data-"+t,o[t]);e.on("load",C),e.attr("src",n),d.edit.on(),p(!1),d.undo.saveStep(),d.$el.blur(),d.events.trigger(i?"image.replaced":"image.inserted",[e,f])}else e=I(n,o,C),p(!1),d.undo.saveStep(),d.$el.blur(),d.events.trigger("image.inserted",[e,f])},t.onerror=function(){m(Ie)},v(d.language.translate("Loading image")),t.src=n}function D(e){try{if(!1===d.events.trigger("image.uploaded",[e],!0))return d.edit.on(),!1;var t=JSON.parse(e);return t.link?t:(m(ke,e),!1)}catch(i){return m(Be,e),!1}}function S(e){try{var t=Ne(e).find("Location").text(),i=Ne(e).find("Key").text();return!1===d.events.trigger("image.uploadedToS3",[t,i,e],!0)?(d.edit.on(),!1):t}catch(g){return m(Be,e),!1}}function R(e){y(d.language.translate("Loading image"));var t=this.status,i=this.response,a=this.responseXML,s=this.responseText;try{if(d.opts.imageUploadToS3)if(201==t){var r=S(a);r&&A(r,!1,[],e,i||a)}else m(Be,i||a,e);else if(200<=t&&t<300){var n=D(s);n&&A(n.link,!1,n,e,i||s)}else m(Ue,i||s,e)}catch(o){m(Be,i||s,e)}}function $(){m(Be,this.response||this.responseText||this.responseXML)}function x(e){if(e.lengthComputable){var t=e.loaded/e.total*100|0;y(d.language.translate("Uploading"),t)}}function I(e,t,i){var a,s="";if(t&&void 0!==t)for(a in t)t.hasOwnProperty(a)&&"link"!=a&&(s+=" data-"+a+'="'+t[a]+'"');var r=d.opts.imageDefaultWidth;r&&"auto"!=r&&(r+=d.opts.imageResizeWithPercent?"%":"px");var n=Ne('<img src="'+e+'"'+s+(r?' style="width: '+r+';"':"")+">");ge(n,d.opts.imageDefaultDisplay,d.opts.imageDefaultAlign),n.on("load",i),n.on("error",function(){m(Pe)}),d.edit.on(),d.events.focus(!0),d.selection.restore(),d.undo.saveStep(),d.opts.imageSplitHTML?d.markers.split():d.markers.insert();var o=d.$el.find(".fr-marker");return o.length?(o.parent().is("hr")&&o.parent().after(o),d.node.isLastSibling(o)&&o.parent().hasClass("fr-deletable")&&o.insertAfter(o.parent()),o.replaceWith(n)):d.$el.append(n),d.html.wrap(),d.selection.clear(),n}function k(){d.edit.on(),b(!0)}function U(t,i,e,s){function r(){var e=Ne(this);e.off("load"),e.addClass("fr-uploading"),e.next().is("br")&&e.next().remove(),d.placeholder.refresh(),E(e),l(),v(),d.edit.off(),t.onload=function(){R.call(t,e)},t.onerror=$,t.upload.onprogress=x,t.onabort=k,e.off("abortUpload").on("abortUpload",function(){4!=t.readyState&&t.abort()}),t.send(i)}var n=new FileReader;n.addEventListener("load",function(){var e=n.result;if(n.result.indexOf("svg+xml")<0){for(var t=atob(n.result.split(",")[1]),i=[],a=0;a<t.length;a++)i.push(t.charCodeAt(a));e=window.URL.createObjectURL(new Blob([new Uint8Array(i)],{type:"image/jpeg"}))}s?(s.on("load",r),s.one("error",function(){s.off("load"),s.attr("src",s.data("fr-old-src")),m(Pe)}),d.edit.on(),d.undo.saveStep(),s.data("fr-old-src",s.attr("src")),s.attr("src",e)):I(e,null,r)},!1),n.readAsDataURL(e)}function B(e,t){if(void 0!==e&&0<e.length){if(!1===d.events.trigger("image.beforeUpload",[e,t]))return!1;var i,a=e[0];if(a.name||(a.name=(new Date).getTime()+".jpg"),a.size>d.opts.imageMaxSize)return m(Fe),!1;if(d.opts.imageAllowedTypes.indexOf(a.type.replace(/image\//g,""))<0)return m(Oe),!1;if(d.drag_support.formdata&&(i=d.drag_support.formdata?new FormData:null),i){var s;if(!1!==d.opts.imageUploadToS3)for(s in i.append("key",d.opts.imageUploadToS3.keyStart+(new Date).getTime()+"-"+(a.name||"untitled")),i.append("success_action_status","201"),i.append("X-Requested-With","xhr"),i.append("Content-Type",a.type),d.opts.imageUploadToS3.params)d.opts.imageUploadToS3.params.hasOwnProperty(s)&&i.append(s,d.opts.imageUploadToS3.params[s]);for(s in d.opts.imageUploadParams)d.opts.imageUploadParams.hasOwnProperty(s)&&i.append(s,d.opts.imageUploadParams[s]);i.append(d.opts.imageUploadParam,a,a.name);var r=d.opts.imageUploadURL;d.opts.imageUploadToS3&&(r=d.opts.imageUploadToS3.uploadURL?d.opts.imageUploadToS3.uploadURL:"https://"+d.opts.imageUploadToS3.region+".amazonaws.com/"+d.opts.imageUploadToS3.bucket),U(d.core.getXHR(r,d.opts.imageUploadMethod),i,a,t||De)}}}function F(a){d.events.$on(a,"dragover dragenter",".fr-image-upload-layer",function(){return Ne(this).addClass("fr-drop"),!1},!0),d.events.$on(a,"dragleave dragend",".fr-image-upload-layer",function(){return Ne(this).removeClass("fr-drop"),!1},!0),d.events.$on(a,"drop",".fr-image-upload-layer",function(e){e.preventDefault(),e.stopPropagation(),Ne(this).removeClass("fr-drop");var t=e.originalEvent.dataTransfer;if(t&&t.files){var i=a.data("instance")||d;i.events.disableBlur(),i.image.upload(t.files),i.events.enableBlur()}},!0),d.helpers.isIOS()&&d.events.$on(a,"touchstart",'.fr-image-upload-layer input[type="file"]',function(){Ne(this).trigger("click")},!0),d.events.$on(a,"change",'.fr-image-upload-layer input[type="file"]',function(){if(this.files){var e=a.data("instance")||d;e.events.disableBlur(),a.find("input:focus").blur(),e.events.enableBlur(),e.image.upload(this.files,De)}Ne(this).val("")},!0)}function O(e){var t=e.originalEvent.dataTransfer;if(t&&t.files&&t.files.length){var i=t.files[0];if(i&&i.type&&-1!==i.type.indexOf("image")){d.markers.remove(),d.markers.insertAtPoint(e.originalEvent),d.$el.find(".fr-marker").replaceWith(Ne.FE.MARKERS),0===d.$el.find(".fr-marker").length&&d.selection.setAtEnd(d.el),d.popups.hideAll();var a=d.popups.get("image.insert");a||(a=T()),d.popups.setContainer("image.insert",d.$sc);var s=e.originalEvent.pageX,r=e.originalEvent.pageY;return d.opts.iframe&&(r+=d.$iframe.offset().top,s+=d.$iframe.offset().left),d.popups.show("image.insert",s,r),v(),0<=d.opts.imageAllowedTypes.indexOf(i.type.replace(/image\//g,""))?(oe(!0),B(t.files)):m(Oe),e.preventDefault(),e.stopPropagation(),!1}}}function P(){d.events.$on(d.$el,d._mousedown,"IMG"==d.el.tagName?null:'img:not([contenteditable="false"])',function(e){if("false"==Ne(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable"))return!0;d.helpers.isMobile()||d.selection.clear(),xe=!0,d.popups.areVisible()&&d.events.disableBlur(),d.browser.msie&&(d.events.disableBlur(),d.$el.attr("contenteditable",!1)),d.draggable||"touchstart"==e.type||e.preventDefault(),e.stopPropagation()}),d.events.$on(d.$el,d._mouseup,"IMG"==d.el.tagName?null:'img:not([contenteditable="false"])',function(e){if("false"==Ne(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable"))return!0;xe&&(xe=!1,e.stopPropagation(),d.browser.msie&&(d.$el.attr("contenteditable",!0),d.events.enableBlur()))}),d.events.on("keyup",function(e){if(e.shiftKey&&""===d.selection.text().replace(/\n/g,"")){var t=d.selection.element(),i=d.selection.endElement();t&&"IMG"==t.tagName?E(Ne(t)):i&&"IMG"==i.tagName&&E(Ne(i))}},!0),d.events.on("drop",O),d.events.on("mousedown window.mousedown",le),d.events.on("window.touchmove",fe),d.events.on("mouseup window.mouseup",function(){if(De)return oe(),!1;fe()}),d.events.on("commands.mousedown",function(e){0<e.parents(".fr-toolbar").length&&oe()}),d.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){oe(!(xe=!1))}),d.events.on("modals.hide",function(){De&&(we(),d.selection.clear())})}function T(e){if(e)return d.popups.onRefresh("image.insert",f),d.popups.onHide("image.insert",g),!0;var t,i="";1<d.opts.imageInsertButtons.length&&(i='<div class="fr-buttons">'+d.button.buildList(d.opts.imageInsertButtons)+"</div>");var a=d.opts.imageInsertButtons.indexOf("imageUpload"),s=d.opts.imageInsertButtons.indexOf("imageByURL"),r="";0<=a&&(t=" fr-active",0<=s&&s<a&&(t=""),r='<div class="fr-image-upload-layer'+t+' fr-layer" id="fr-image-upload-layer-'+d.id+'"><strong>'+d.language.translate("Drop image")+"</strong><br>("+d.language.translate("or click")+')<div class="fr-form"><input type="file" accept="image/'+d.opts.imageAllowedTypes.join(", image/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-image-upload-layer-'+d.id+'" role="button"></div></div>');var n="";0<=s&&(t=" fr-active",0<=a&&a<s&&(t=""),n='<div class="fr-image-by-url-layer'+t+' fr-layer" id="fr-image-by-url-layer-'+d.id+'"><div class="fr-input-line"><input id="fr-image-by-url-layer-text-'+d.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageInsertByURL" tabIndex="2" role="button">'+d.language.translate("Insert")+"</button></div></div>");var o={buttons:i,upload_layer:r,by_url_layer:n,progress_bar:'<div class="fr-image-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="imageDismissError" tabIndex="2" role="button">OK</button></div></div>'},l=d.popups.create("image.insert",o);return d.$wp&&d.events.$on(d.$wp,"scroll",function(){De&&d.popups.isVisible("image.insert")&&ye()}),F(l),l}function L(){De&&d.popups.get("image.alt").find("input").val(De.attr("alt")||"").trigger("change")}function z(){var e=d.popups.get("image.alt");e||(e=M()),b(),d.popups.refresh("image.alt"),d.popups.setContainer("image.alt",d.$sc);var t=De.offset().left+De.width()/2,i=De.offset().top+De.height();d.popups.show("image.alt",t,i,De.outerHeight())}function M(e){if(e)return d.popups.onRefresh("image.alt",L),!0;var t={buttons:'<div class="fr-buttons">'+d.button.buildList(d.opts.imageAltButtons)+"</div>",alt_layer:'<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'+d.id+'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-'+d.id+'" type="text" placeholder="'+d.language.translate("Alternate Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">'+d.language.translate("Update")+"</button></div></div>"},i=d.popups.create("image.alt",t);return d.$wp&&d.events.$on(d.$wp,"scroll.image-alt",function(){De&&d.popups.isVisible("image.alt")&&z()}),i}function N(e){if(De){var t=d.popups.get("image.alt");De.attr("alt",e||t.find("input").val()||""),t.find("input:focus").blur(),E(De)}}function _(){if(De){var e=d.popups.get("image.size");e.find('input[name="width"]').val(De.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(De.get(0).style.height).trigger("change")}}function K(){var e=d.popups.get("image.size");e||(e=W()),b(),d.popups.refresh("image.size"),d.popups.setContainer("image.size",d.$sc);var t=De.offset().left+De.width()/2,i=De.offset().top+De.height();d.popups.show("image.size",t,i,De.outerHeight())}function W(e){if(e)return d.popups.onRefresh("image.size",_),!0;var t={buttons:'<div class="fr-buttons">'+d.button.buildList(d.opts.imageSizeButtons)+"</div>",size_layer:'<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'+d.id+'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-'+d.id+'" type="text" name="width" placeholder="'+d.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height'+d.id+'" type="text" name="height" placeholder="'+d.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">'+d.language.translate("Update")+"</button></div></div>"},i=d.popups.create("image.size",t);return d.$wp&&d.events.$on(d.$wp,"scroll.image-size",function(){De&&d.popups.isVisible("image.size")&&K()}),i}function Y(e,t){if(De){var i=d.popups.get("image.size");e=e||i.find('input[name="width"]').val()||"",t=t||i.find('input[name="height"]').val()||"";var a=/^[\d]+((px)|%)*$/g;e.match(a)?De.css("width",e):De.css("width",""),t.match(a)?De.css("height",t):De.css("height",""),i.find("input:focus").blur(),E(De)}}function H(e){var t,i,a=d.popups.get("image.insert");if(De||d.opts.toolbarInline)De&&(i=De.offset().top+De.outerHeight());else{var s=d.$tb.find('.fr-command[data-cmd="insertImage"]');t=s.offset().left+s.outerWidth()/2,i=s.offset().top+(d.opts.toolbarBottom?10:s.outerHeight()-10)}!De&&d.opts.toolbarInline&&(i=a.offset().top-d.helpers.getPX(a.css("margin-top")),a.hasClass("fr-above")&&(i+=a.outerHeight())),a.find(".fr-layer").removeClass("fr-active"),a.find(".fr-"+e+"-layer").addClass("fr-active"),d.popups.show("image.insert",t,i,De?De.outerHeight():0),d.accessibility.focusPopup(a)}function X(e){d.popups.get("image.insert").find(".fr-image-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function j(e){d.popups.get("image.insert").find(".fr-image-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function G(e,t,i,a){return e.pageX=t,n.call(this,e),e.pageX=e.pageX+i*Math.floor(Math.pow(1.1,a)),u.call(this,e),c.call(this,e),++a}function q(){var e;if(d.shared.$image_resizer?(Se=d.shared.$image_resizer,$e=d.shared.$img_overlay,d.events.on("destroy",function(){Se.removeClass("fr-active").appendTo(Ne("body:first"))},!0)):(d.shared.$image_resizer=Ne('<div class="fr-image-resizer"></div>'),Se=d.shared.$image_resizer,d.events.$on(Se,"mousedown",function(e){e.stopPropagation()},!0),d.opts.imageResize&&(Se.append(t("nw")+t("ne")+t("sw")+t("se")),d.shared.$img_overlay=Ne('<div class="fr-image-overlay"></div>'),$e=d.shared.$img_overlay,e=Se.get(0).ownerDocument,Ne(e).find("body:first").append($e))),d.events.on("shared.destroy",function(){Se.html("").removeData().remove(),Se=null,d.opts.imageResize&&($e.remove(),$e=null)},!0),d.helpers.isMobile()||d.events.$on(Ne(d.o_win),"resize",function(){De&&!De.hasClass("fr-uploading")?oe(!0):De&&(l(),ye(),v(!1))}),d.opts.imageResize){e=Se.get(0).ownerDocument,d.events.$on(Se,d._mousedown,".fr-handler",n),d.events.$on(Ne(e),d._mousemove,u),d.events.$on(Ne(e.defaultView||e.parentWindow),d._mouseup,c),d.events.$on($e,"mouseleave",c);var a=1,s=null,r=0;d.events.on("keydown",function(e){if(De){var t=-1!=navigator.userAgent.indexOf("Mac OS X")?e.metaKey:e.ctrlKey,i=e.which;(i!==s||200<e.timeStamp-r)&&(a=1),(i==Ne.FE.KEYCODE.EQUALS||d.browser.mozilla&&i==Ne.FE.KEYCODE.FF_EQUALS)&&t&&!e.altKey?a=G.call(this,e,1,1,a):(i==Ne.FE.KEYCODE.HYPHEN||d.browser.mozilla&&i==Ne.FE.KEYCODE.FF_HYPHEN)&&t&&!e.altKey?a=G.call(this,e,2,-1,a):d.keys.ctrlKey(e)||i!=Ne.FE.KEYCODE.ENTER||(De.before("<br>"),E(De)),s=i,r=e.timeStamp}},!0),d.events.on("keyup",function(){a=1})}}function V(e){(e=e||De)&&!1!==d.events.trigger("image.beforeRemove",[e])&&(d.popups.hideAll(),we(),oe(!0),d.undo.canDo()||d.undo.saveStep(),e.get(0)==d.el?e.removeAttr("src"):("A"==e.get(0).parentNode.tagName?(d.selection.setBefore(e.get(0).parentNode)||d.selection.setAfter(e.get(0).parentNode)||e.parent().after(Ne.FE.MARKERS),Ne(e.get(0).parentNode).remove()):(d.selection.setBefore(e.get(0))||d.selection.setAfter(e.get(0))||e.after(Ne.FE.MARKERS),e.remove()),d.html.fillEmptyBlocks(),d.selection.restore()),d.undo.saveStep())}function Q(e){var t=e.which;if(De&&(t==Ne.FE.KEYCODE.BACKSPACE||t==Ne.FE.KEYCODE.DELETE))return e.preventDefault(),e.stopPropagation(),V(),!1;if(De&&t==Ne.FE.KEYCODE.ESC){var i=De;return oe(!0),d.selection.setAfter(i.get(0)),d.selection.restore(),e.preventDefault(),!1}if(!De||t!=Ne.FE.KEYCODE.ARROW_LEFT&&t!=Ne.FE.KEYCODE.ARROW_RIGHT)return De&&t!=Ne.FE.KEYCODE.F10&&!d.keys.isBrowserAction(e)?(e.preventDefault(),e.stopPropagation(),!1):void 0;var a=De.get(0);return oe(!0),t==Ne.FE.KEYCODE.ARROW_LEFT?d.selection.setBefore(a):d.selection.setAfter(a),d.selection.restore(),e.preventDefault(),!1}function J(e){if(e&&"IMG"==e.tagName)d.node.hasClass(e,"fr-uploading")||d.node.hasClass(e,"fr-error")?e.parentNode.removeChild(e):d.node.hasClass(e,"fr-draggable")&&e.classList.remove("fr-draggable");else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var t=e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"),i=0;i<t.length;i++)J(t[i])}function Z(){var a;(P(),"IMG"==d.el.tagName&&d.$el.addClass("fr-view"),d.events.$on(d.$el,d.helpers.isMobile()&&!d.helpers.isWindowsPhone()?"touchend":"click","IMG"==d.el.tagName?null:'img:not([contenteditable="false"])',ne),d.helpers.isMobile()&&(d.events.$on(d.$el,"touchstart","IMG"==d.el.tagName?null:'img:not([contenteditable="false"])',function(){ze=!1}),d.events.$on(d.$el,"touchmove",function(){ze=!0})),d.$wp?(d.events.on("window.keydown keydown",Q,!0),d.events.on("keyup",function(e){if(De&&e.which==Ne.FE.KEYCODE.ENTER)return!1},!0)):d.events.$on(d.$win,"keydown",Q),d.events.on("toolbar.esc",function(){if(De){if(d.$wp)d.events.disableBlur(),d.events.focus();else{var e=De;oe(!0),d.selection.setAfter(e.get(0)),d.selection.restore()}return!1}},!0),d.events.on("toolbar.focusEditor",function(){if(De)return!1},!0),d.events.on("window.cut window.copy",function(e){De&&d.popups.isVisible("image.edit")&&!d.popups.get("image.edit").find(":focus").length&&(we(),d.paste.saveCopiedText(De.get(0).outerHTML,"\n"),"copy"==e.type?setTimeout(function(){E(De)}):(oe(!0),d.undo.saveStep(),setTimeout(function(){d.undo.saveStep()},0)))},!0),d.browser.msie&&d.events.on("keydown",function(e){if(!d.selection.isCollapsed()||!De)return!0;var t=e.which;t==Ne.FE.KEYCODE.C&&d.keys.ctrlKey(e)?d.events.trigger("window.copy"):t==Ne.FE.KEYCODE.X&&d.keys.ctrlKey(e)&&d.events.trigger("window.cut")}),d.events.$on(Ne(d.o_win),"keydown",function(e){var t=e.which;if(De&&t==Ne.FE.KEYCODE.BACKSPACE)return e.preventDefault(),!1}),d.events.$on(d.$win,"keydown",function(e){var t=e.which;De&&De.hasClass("fr-uploading")&&t==Ne.FE.KEYCODE.ESC&&De.trigger("abortUpload")}),d.events.on("destroy",function(){De&&De.hasClass("fr-uploading")&&De.trigger("abortUpload")}),d.events.on("paste.before",se),d.events.on("paste.beforeCleanup",re),d.events.on("paste.after",te),d.events.on("html.set",o),d.events.on("html.inserted",o),o(),d.events.on("destroy",function(){Le=[]}),d.events.on("html.processGet",J),d.opts.imageOutputSize)&&d.events.on("html.beforeGet",function(){a=d.el.querySelectorAll("img");for(var e=0;e<a.length;e++){var t=a[e].style.width||Ne(a[e]).width(),i=a[e].style.height||Ne(a[e]).height();t&&a[e].setAttribute("width",(""+t).replace(/px/,"")),i&&a[e].setAttribute("height",(""+i).replace(/px/,""))}});d.opts.iframe&&d.events.on("image.loaded",d.size.syncIframe),d.$wp&&(p(),d.events.on("contentChanged",p)),d.events.$on(Ne(d.o_win),"orientationchange.image",function(){setTimeout(function(){De&&E(De)},100)}),h(!0),T(!0),W(!0),M(!0),d.events.on("node.remove",function(e){if("IMG"==e.get(0).tagName)return V(e),!1})}function ee(e){if(!1===d.events.trigger("image.beforePasteUpload",[e]))return!1;De=Ne(e),l(),s(),ye(),v();for(var t=atob(Ne(e).attr("src").split(",")[1]),i=[],a=0;a<t.length;a++)i.push(t.charCodeAt(a));B([new Blob([new Uint8Array(i)],{type:"image/jpeg"})],De)}function te(){d.opts.imagePaste?d.$el.find("img[data-fr-image-pasted]").each(function(e,i){if(d.opts.imagePasteProcess){var t=d.opts.imageDefaultWidth;t&&"auto"!=t&&(t+=d.opts.imageResizeWithPercent?"%":"px"),Ne(i).css("width",t).removeClass("fr-dii fr-dib fr-fir fr-fil").addClass((d.opts.imageDefaultDisplay?"fr-di"+d.opts.imageDefaultDisplay[0]:"")+(d.opts.imageDefaultAlign&&"center"!=d.opts.imageDefaultAlign?" fr-fi"+d.opts.imageDefaultAlign[0]:""))}if(0===i.src.indexOf("data:"))ee(i);else if(0===i.src.indexOf("blob:")){var a=new Image;a.crossOrigin="Anonymous",a.onload=function(){var e=d.o_doc.createElement("CANVAS"),t=e.getContext("2d");e.height=this.naturalHeight,e.width=this.naturalWidth,t.drawImage(this,0,0),i.src=e.toDataURL("image/png"),ee(i)},a.src=i.src}else 0!==i.src.indexOf("http")||0===i.src.indexOf("https://mail.google.com/mail")?(d.selection.save(),Ne(i).remove(),d.selection.restore()):Ne(i).removeAttr("data-fr-image-pasted")}):d.$el.find("img[data-fr-image-pasted]").remove()}function ie(e){var t=e.target.result,i=d.opts.imageDefaultWidth;i&&"auto"!=i&&(i+=d.opts.imageResizeWithPercent?"%":"px"),d.html.insert('<img data-fr-image-pasted="true" class="'+(d.opts.imageDefaultDisplay?"fr-di"+d.opts.imageDefaultDisplay[0]:"")+(d.opts.imageDefaultAlign&&"center"!=d.opts.imageDefaultAlign?" fr-fi"+d.opts.imageDefaultAlign[0]:"")+'" src="'+t+'"'+(i?' style="width: '+i+';"':"")+">"),d.events.trigger("paste.after")}function ae(e){var t=new FileReader;t.onload=ie,t.readAsDataURL(e)}function se(e){if(e&&e.clipboardData&&e.clipboardData.items){var t=null;if(e.clipboardData.getData("text/rtf"))t=e.clipboardData.items[0].getAsFile();else for(var i=0;i<e.clipboardData.items.length&&!(t=e.clipboardData.items[i].getAsFile());i++);if(t)return ae(t),!1}}function re(e){return e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function ne(e){if("false"==Ne(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable"))return!0;if(e&&"touchend"==e.type&&ze)return!0;if(e&&d.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1;for(var t=0;t<Ne.FE.INSTANCES.length;t++)Ne.FE.INSTANCES[t]!=d&&Ne.FE.INSTANCES[t].events.trigger("image.hideResizer");d.toolbar.disable(),e&&(e.stopPropagation(),e.preventDefault()),d.helpers.isMobile()&&(d.events.disableBlur(),d.$el.blur(),d.events.enableBlur()),d.opts.iframe&&d.size.syncIframe(),De=Ne(this),d.browser.msie||we(),l(),s(),d.browser.msie||d.selection.clear(),d.helpers.isIOS()&&(d.events.disableBlur(),d.$el.blur()),d.button.bulkRefresh(),d.events.trigger("video.hideResizer")}function oe(e){De&&(de()||!0===e)&&(d.toolbar.enable(),Se.removeClass("fr-active"),d.popups.hide("image.edit"),De=null,fe())}function le(){Me=!0}function fe(){Me=!1}function de(){return Me}function ge(e,t,i){!d.opts.htmlUntouched&&d.opts.useClasses?(e.removeClass("fr-fil fr-fir fr-dib fr-dii"),i&&e.addClass("fr-fi"+i[0]),t&&e.addClass("fr-di"+t[0])):"inline"==t?(e.css({display:"inline-block",verticalAlign:"bottom",margin:d.opts.imageDefaultMargin}),"center"==i?e.css({"float":"none",marginBottom:"",marginTop:"",maxWidth:"calc(100% - "+2*d.opts.imageDefaultMargin+"px)"}):"left"==i?e.css({"float":"left",marginLeft:0,maxWidth:"calc(100% - "+d.opts.imageDefaultMargin+"px)"}):e.css({"float":"right",marginRight:0,maxWidth:"calc(100% - "+d.opts.imageDefaultMargin+"px)"})):"block"==t&&(e.css({display:"block","float":"none",verticalAlign:"top",margin:d.opts.imageDefaultMargin+"px auto"}),"left"==i?e.css({marginLeft:0}):"right"==i&&e.css({marginRight:0}))}function pe(e){De.removeClass("fr-fir fr-fil"),!d.opts.htmlUntouched&&d.opts.useClasses?"left"==e?De.addClass("fr-fil"):"right"==e&&De.addClass("fr-fir"):ge(De,ce(),e),we(),l(),s(),d.selection.clear()}function ue(e){if(void 0===e&&(e=De),e){if(e.hasClass("fr-fil"))return"left";if(e.hasClass("fr-fir"))return"right";if(e.hasClass("fr-dib")||e.hasClass("fr-dii"))return"center";var t=e.css("float");if(e.css("float","none"),"block"==e.css("display")){if(e.css("float",""),e.css("float")!=t&&e.css("float",t),0===parseInt(e.css("margin-left"),10))return"left";if(0===parseInt(e.css("margin-right"),10))return"right"}else{if(e.css("float",""),e.css("float")!=t&&e.css("float",t),"left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function ce(e){void 0===e&&(e=De);var t=e.css("float");return e.css(
"float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function me(e){De&&e.find("> *:first").replaceWith(d.icon.create("image-align-"+ue()))}function he(e,t){De&&t.find('.fr-command[data-param1="'+ue()+'"]').addClass("fr-active").attr("aria-selected",!0)}function ve(e){De.removeClass("fr-dii fr-dib"),!d.opts.htmlUntouched&&d.opts.useClasses?"inline"==e?De.addClass("fr-dii"):"block"==e&&De.addClass("fr-dib"):ge(De,e,ue()),we(),l(),s(),d.selection.clear()}function be(e,t){De&&t.find('.fr-command[data-param1="'+ce()+'"]').addClass("fr-active").attr("aria-selected",!0)}function ye(){var e=d.popups.get("image.insert");e||(e=T()),d.popups.isVisible("image.insert")||(b(),d.popups.refresh("image.insert"),d.popups.setContainer("image.insert",d.$sc));var t=De.offset().left+De.width()/2,i=De.offset().top+De.height();d.popups.show("image.insert",t,i,De.outerHeight())}function we(){if(De){d.events.disableBlur(),d.selection.clear();var e=d.doc.createRange();e.selectNode(De.get(0)),d.selection.get().addRange(e),d.events.enableBlur()}}function Ee(){De?(d.events.disableBlur(),Ne(".fr-popup input:focus").blur(),E(De)):(d.events.disableBlur(),d.selection.restore(),d.events.enableBlur(),d.popups.hide("image.insert"),d.toolbar.showInline())}function Ce(){return De}function Ae(e,t,i){if(void 0===t&&(t=d.opts.imageStyles),void 0===i&&(i=d.opts.imageMultipleStyles),!De)return!1;if(!i){var a=Object.keys(t);a.splice(a.indexOf(e),1),De.removeClass(a.join(" "))}"object"==typeof t[e]?(De.removeAttr("style"),De.css(t[e].style)):De.toggleClass(e),E(De)}var De,Se,Re,$e,xe=!1,Ie=1,ke=2,Ue=3,Be=4,Fe=5,Oe=6,Pe=8,Te={};Te[Ie]="Image cannot be loaded from the passed link.",Te[ke]="No link in upload response.",Te[Ue]="Error during file upload.",Te[Be]="Parsing response failed.",Te[Fe]="File is too large.",Te[Oe]="Image file type is invalid.",Te[7]="Files can be uploaded only to same domain in IE 8 and IE 9.";var Le,ze,Me=!(Te[Pe]="Image file is corrupted.");return{_init:Z,showInsertPopup:i,showLayer:H,refreshUploadButton:X,refreshByURLButton:j,upload:B,insertByURL:e,align:pe,refreshAlign:me,refreshAlignOnShow:he,display:ve,refreshDisplayOnShow:be,replace:ye,back:Ee,get:Ce,insert:A,showProgressBar:v,remove:V,hideProgressBar:b,applyStyle:Ae,showAltPopup:z,showSizePopup:K,setAlt:N,setSize:Y,exitEdit:oe,edit:E}},Ne.FE.DefineIcon("insertImage",{NAME:"image"}),Ne.FE.RegisterShortcut(Ne.FE.KEYCODE.P,"insertImage",null,"P"),Ne.FE.RegisterCommand("insertImage",{title:"Insert Image",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("image.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("image.insert")):this.image.showInsertPopup()},plugin:"image"}),Ne.FE.DefineIcon("imageUpload",{NAME:"upload"}),Ne.FE.RegisterCommand("imageUpload",{title:"Upload Image",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-upload")},refresh:function(e){this.image.refreshUploadButton(e)}}),Ne.FE.DefineIcon("imageByURL",{NAME:"link"}),Ne.FE.RegisterCommand("imageByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-by-url")},refresh:function(e){this.image.refreshByURLButton(e)}}),Ne.FE.RegisterCommand("imageInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.image.insertByURL()},refresh:function(e){this.image.get()?e.text(this.language.translate("Replace")):e.text(this.language.translate("Insert"))}}),Ne.FE.DefineIcon("imageDisplay",{NAME:"star"}),Ne.FE.RegisterCommand("imageDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.image.display(t)},refresh:function(e){this.opts.imageTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.image.refreshDisplayOnShow(e,t)}}),Ne.FE.DefineIcon("image-align",{NAME:"align-left"}),Ne.FE.DefineIcon("image-align-left",{NAME:"align-left"}),Ne.FE.DefineIcon("image-align-right",{NAME:"align-right"}),Ne.FE.DefineIcon("image-align-center",{NAME:"align-justify"}),Ne.FE.DefineIcon("imageAlign",{NAME:"align-justify"}),Ne.FE.RegisterCommand("imageAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=Ne.FE.COMMANDS.imageAlign.options;for(var i in t)t.hasOwnProperty(i)&&(e+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="imageAlign" data-param1="'+i+'" title="'+this.language.translate(t[i])+'">'+this.icon.create("image-align-"+i)+'<span class="fr-sr-only">'+this.language.translate(t[i])+"</span></a></li>");return e+"</ul>"},callback:function(e,t){this.image.align(t)},refresh:function(e){this.image.refreshAlign(e)},refreshOnShow:function(e,t){this.image.refreshAlignOnShow(e,t)}}),Ne.FE.DefineIcon("imageReplace",{NAME:"exchange"}),Ne.FE.RegisterCommand("imageReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.image.replace()}}),Ne.FE.DefineIcon("imageRemove",{NAME:"trash"}),Ne.FE.RegisterCommand("imageRemove",{title:"Remove",callback:function(){this.image.remove()}}),Ne.FE.DefineIcon("imageBack",{NAME:"arrow-left"}),Ne.FE.RegisterCommand("imageBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.image.back()},refresh:function(e){this.image.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),Ne.FE.RegisterCommand("imageDismissError",{title:"OK",undo:!1,callback:function(){this.image.hideProgressBar(!0)}}),Ne.FE.DefineIcon("imageStyle",{NAME:"magic"}),Ne.FE.RegisterCommand("imageStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.imageStyles;for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];"object"==typeof a&&(a=a.title),e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="imageStyle" data-param1="'+i+'">'+this.language.translate(a)+"</a></li>"}return e+"</ul>"},callback:function(e,t){this.image.applyStyle(t)},refreshOnShow:function(e,t){var i=this.image.get();i&&t.find(".fr-command").each(function(){var e=Ne(this).data("param1"),t=i.hasClass(e);Ne(this).toggleClass("fr-active",t).attr("aria-selected",t)})}}),Ne.FE.DefineIcon("imageAlt",{NAME:"info"}),Ne.FE.RegisterCommand("imageAlt",{undo:!1,focus:!1,popup:!0,title:"Alternate Text",callback:function(){this.image.showAltPopup()}}),Ne.FE.RegisterCommand("imageSetAlt",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setAlt()}}),Ne.FE.DefineIcon("imageSize",{NAME:"arrows-alt"}),Ne.FE.RegisterCommand("imageSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.image.showSizePopup()}}),Ne.FE.RegisterCommand("imageSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setSize()}})});