<div class="form-group">
  <%= label_tag :search, "Search for an event" %>
  <%= search_field_tag(:cohort_name, "", :onkeyup => 'sendSearch()', class: 'form-control') %>
</div>

<div class="row bottom-buffer">
  <ul class="nav nav-tabs">
    <li role="presentation" onclick="changeTab('past')"><a href="#">Past</a></li>
    <li role="presentation" onclick="changeTab('in-progress')"><a href="#">In-progress</a></li>
    <li role="presentation" class="active" onclick="changeTab('future')"><a href="#">Upcoming</a></li>
  </ul>
</div>

<div id="cohorts_search_results" class="row">
  <% @cohorts.each do |cohort| %>
    <div class="row bottom-buffer">
      <%= render 'cohort_stub_banner', :cohort => cohort %>
    </div>
  <% end %>
</div>

<script>
  function sendSearch() {
    const searchTerm = document.querySelector("#cohort_name").value;
    if (searchTerm.length > 3 || searchTerm.length === 0) {
      Rails.ajax({
        url: "<%= search_cohorts_path %>",
        type: "POST",
        data: `search_term=${searchTerm}`,
        success: function (data) {
          document.querySelector("#cohorts_search_results").innerHTML = data.html;
        }
      });
    }
  }

  function changeTab(event) {
    debugger;
    document.querySelector("body > div.container > div.row.bottom-buffer > ul > li:nth-child(2)")
<!--    Rails.ajax({-->
<!--      url: "<%= search_cohorts_path %>",-->
<!--      type: "POST",-->
<!--      data: `search_term=${searchTerm}`,-->
<!--      success: function (data) {-->
<!--        document.querySelector("#cohorts_search_results").innerHTML = data.html;-->
<!--      }-->
<!--    });-->
  }


</script>
